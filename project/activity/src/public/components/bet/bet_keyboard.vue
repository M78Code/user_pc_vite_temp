<!--
 * @Author: Sword
 * @Date: 2020-08-04 17:13:55
 * @Description: 键盘组件
 'disabled':item.disabled,
-->
<template>
  <div class="q-gutter-xs keyboard-zone" :class="{'is_big_vedio': is_big_vedio}">
    <div
      class="keyboard-btn"
      :class="{
        'disable-key-btn': item.disabled || [2,3].includes(status*1),
        'key-btn-click': is_keydown,
        'big_keyboard-btn':is_big_vedio,
      }"
      v-for="(item, index) in keyboard_data"
      :data-num="item.text"
      :key="`xs-${index+1}`"
      @click.stop="keypress_handle(item,$event)"
      @keydown="is_keydown=true"
      @keyup="is_keydown=false"
    >
      <!--键盘按键文本显示 如果无效则置灰 以及MAX按钮文本显示-->
      <div class="keyboard-btn-text" :class="{'text-disable': item.disabled}"><template v-if="item.text!='MAX'">+</template>{{item.text}}</div>
    </div>
  </div>
</template>
<script>
// 公共主题文件引入

export default {
  name: "bet-keyboard",
  mixins: [ ],
  data() {
    return {
      is_keydown: false
    };
  },
  props: {
    // 键盘数据以及默认键盘数据
    keyboard_data: {
      type: Array,
      default: () => {
        return [
          {
            text: "10",
            value: 10,
            disabled: false
          },
          {
            text: "50",
            value: 50,
            disabled: false
          },
          {
            text: "100",
            value: 100,
            disabled: false
          },
          {
            text: "200",
            value: 200,
            disabled: false
          },
          {
            text: "300",
            value: 300,
            disabled: false
          },
          {
            text: "500",
            value: 500,
            disabled: false
          }
        ]
      }
    },
    // 当前按键值
    number:String,
    status: {
      type: Number,
      default: 1
    },
    is_big_vedio: {
      type: Boolean,
      default: false
    },
    min_max_money: {   //限额
      type: String,
      default: "0"
    },
  },
  methods: {
    /**
     * @description: 键盘按下事件
     * @param {Object} obj 点击的按钮对象
     * @param {Event} e 按钮事件
     * @return {undefined} undefined
     */
    keypress_handle(obj, e) {
      // 限额为返回前 点击快捷金额不生效
      if(!this.min_max_money){
        return
      }
      //投注按钮是否失效事件
      this.$root.$emit(this.emit_cmd.EMIT_BTN_CHANGE, false)
      // 如果是enter键按下则不执行
      if(e.qKeyEvent){
        // 触发enter键执行
        this.$root.$emit(this.emit_cmd.EMIT_ENTER_PRESS_EVENT,{keyCode:13});
        return;
      }
      if (!obj.disabled) {
        if(obj.text!='MAX') {
          let num = obj.value;
          let data = {
            keyboard_object: obj,
            number: parseFloat(num).toFixed(2)
          };
          // 触发键盘时间
          this.$emit("keypress_handle", data);
        } else {
          // 触发使输入框显示最大的金额
          this.$emit("input_max_money");
        }
      }
    }
  }
};
</script>
<style lang="scss" scoped>
/*  键盘区域样式设置 */
.keyboard-zone {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}
.is_big_vedio {
  justify-content: initial;
}
/*  键盘按钮样式 */
.keyboard-btn {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 58px;
  height: 26px;
  margin-bottom: 2px;
  margin-left: 0px;
  margin-right: -2px;
  /*  键盘文本前面加号的样式 */
  .keyboard-btn-add {
    margin-right: 20px;
  }

  /*  按钮文字样式 */
  .keyboard-btn-text {
    line-height: 24px;
  }
}
/*  按键间距设置 */
.big_keyboard-btn{
   margin-right: 10px;
}

</style>
